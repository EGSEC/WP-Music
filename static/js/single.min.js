+function(t){"use strict";var e="ontouchstart"in document?"touchstart":"click",n={queue:[],current:null,bomb:0,debug:!1},r=function(t){n.debug&&console.log(t)},a=function(t){if(!isFinite(t)||0>t)t="--:--";else{var e=Math.floor(t/60);t=Math.floor(t)%60,t=(10>e?"0"+e:e)+":"+(10>t?"0"+t:t)}return t},s=function(){var s=this;this.options={selector:"#nm_jplayer"},this.player=this.options.selector,s._init(),t(s.player).bind(t.jPlayer.event.play,function(){var e=playlist[n.current][n.bomb];t(".nms-play-btn").removeClass("nm-pause").addClass("nm-play"),t(".nms-list-item").removeClass("is-active"),t("#nm-list-"+n.current+" .nms-list-item").data("status","ready"),t("#nm-player-"+n.current+" .nmplayer-title").html(e.title+" - "+e.artist),t("#nm-player-"+n.current+" .duration").html(a(e.duration)),t("#nm-player-"+n.current+" .nms-play-btn").removeClass("nm-play").addClass("nm-pause"),t("#nm-list-"+n.current).length>0&&(t("#nm-list-"+n.current+" .nms-list-item").eq(n.bomb).addClass("is-active"),t("#nm-list-"+n.current+" .nms-list-item").eq(n.bomb).data("status","play"))}),t(s.player).bind(t.jPlayer.event.pause,function(){playlist[n.current][n.bomb];t("#nm-player-"+n.current+" .nms-play-btn").removeClass("nm-pause").addClass("nm-play"),t("#nm-list-"+n.current+" .nms-list-item").eq(n.bomb).data("status","pause"),r(n.bomb),r("sb")}),t(s.player).bind(t.jPlayer.event.ended,function(){n.bomb<playlist[n.current].length-1?(n.bomb=n.bomb+1,s.play(n.current,n.bomb),t(s.player).jPlayer("play"),r("continue")):(n.bomb=0,r("end success"))}),t(document).on(e,".com-close",function(){var e=t(this);e.parent().remove()}),t(document).on(e,".nm-mute",function(){var e=t(".nm-mute"),n=e.data("status");"mute"==n?(t(s.player).jPlayer("unmute"),e.data("status","unmute"),e.removeClass("muted"),r("unmute mod")):(e.data("status","mute"),t(s.player).jPlayer("mute"),e.addClass("muted"),r("mute mod"))}),t(document).on(e,".nm-previous",function(){var e=t(this),a=e.parent().data("index");r("previous"),a==n.current&&(playlist[n.current]<2||(r("previous"),s.previous()))}),t(document).on(e,".nm-next",function(){var e=t(this),a=e.parent().data("index");r("next"),a==n.current&&(r("next"),s.next())}),t(document).on(e,".nms-play-btn",function(){var e=t(this),a=e.data("index");n.current==a?e.hasClass("nm-play")?(r("player continue."),s.play()):(r("player pause."),s.pause()):(r("player play."),n.current=a,s.play(n.current,0))}),t(".nmsingle-process").on("click",function(e){e.preventDefault();var r=t(this),a=r.data("index");if(a===n.current){var l=r.offset().left,u=(e.pageX-l)/r.width(),i=playlist[n.current][n.bomb].duration;t(s.player).jPlayer("play",i*u)}}),t(document).on("click",".nms-list-item",function(){var e=t(this),a=e.parent().data("index"),s=e.index();return a==n.current&&s==n.bomb?r("current song selected"):(n.current=a,n.bomb=s,t("#nm_jplayer").jPlayer("setMedia",playlist[n.current][n.bomb]),void t("#nm_jplayer").jPlayer("play"))})};s.prototype={_init:function(){t(this.player).jPlayer({timeupdate:function(e){var r,r=e.jPlayer.status.currentTime,r=a(r),s=playlist[n.current][n.bomb].lrc,l=parseInt(e.jPlayer.status.currentTime);void 0!=s[l]&&t("#nm-player-"+n.current+" .nmsingle-lrc").html(s[l]),t("#nm-player-"+n.current+" .current-time").text(r),t("#nm-player-"+n.current+" .nmsingle-process-bar").css("transform","translateX("+(e.jPlayer.status.currentPercentAbsolute-100)+"%)")},supplied:"mp3",swfPath:nm_ajax_url.swfurl,solution:"html,flash",volume:1})},play:function(e,n){"undefined"!=typeof e&&"undefined"!=typeof n&&this.select(e,n),t(this.player).jPlayer("play")},pause:function(){t(this.player).jPlayer("pause")},next:function(){var t=playlist[n.current].length;n.bomb!=t-1&&this.play(n.current,n.bomb+1)},previous:function(){n.bomb<1||(r(n.bomb),this.play(n.current,n.bomb-1))},select:function(e,r){n.current=e,n.bomb=r,t(this.player).jPlayer("setMedia",playlist[n.current][n.bomb])}};new s}(jQuery);